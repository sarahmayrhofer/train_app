{% extends "base.html" %}

{% block content %}
<h1>{{ train.name }}</h1>
<p>Anzahl der Waggons: {{ train.wagons|length }}</p>
<p>Max. Gewicht: <span id="totalMaxWeight"></span></p>
<p>Anz. der Sitze: <span id="totalSeats"></span></p>

<div style="display: flex;">
    <!-- Locomotive Table -->
    <table>
        <caption>Triebwagen</caption>
        <tr>
            <th style="width: 10px">ID</th>
            <th style="width: 120px">Spurweite</th>
            <th style="width: 120px">Max. Zugkraft</th>
        </tr>
        {% for wagon in train.wagons if wagon.wagon_type == 'locomotive' %}
        <tr>
            <td style="padding: 5px;width: 80px">[Wagen {{ wagon.id }}]</td>
            <td style="padding: 5px;width: 120px">{{ wagon.track_width }} mm.</td>
            <td style="padding: 5px;width: 120px">{{ wagon.max_traction }} t.</td>
        </tr>
        {% endfor %}
    </table>

    <!-- Normal Wagons Table -->
    <table style="margin-left: 100px;">
        <caption>Personenwagen</caption>
        <tr>
            <th style="width: 10px">ID</th>
            <th style="width: 120px">Spurweite</th>
            <th style="width: 120px">Max. Gewicht</th>
            <th style="width: 120px">Sitze</th>
        </tr>
        {% for wagon in train.wagons if wagon.wagon_type == 'normal_wagon' %}
        <tr>
            <td style="padding: 5px;width: 120px">[Wagen {{ wagon.id }}]</td>
            <td style="padding: 5px;width: 120px">{{ wagon.track_width }}</td>
            <td style="padding: 5px;width: 120px">{{ wagon.max_weight }}</td>
            <td style="padding: 5px;width: 120px">{{ wagon.number_of_seats }}</td>
        </tr>
        {% endfor %}
    </table>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var totalMaxWeightElement = document.getElementById('totalMaxWeight');
    var totalSeatsElement = document.getElementById('totalSeats');
    var totalMaxWeight = 0;
    var totalSeats = 0;

    // Iterate over normal wagons and calculate total max weight and total seats
    {% for wagon in train.wagons if wagon.wagon_type == 'normal_wagon' %}
    totalMaxWeight += {{ wagon.max_weight }};
    totalSeats += {{ wagon.number_of_seats }};
    {% endfor %}

    // Display the total max weight and total seats
    totalMaxWeightElement.textContent = totalMaxWeight;
    totalSeatsElement.textContent = totalSeats;
  });
</script>
{% endblock %}
